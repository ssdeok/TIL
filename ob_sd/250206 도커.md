
Docker?
애플리케이션을 이미지화 하고 컨테이너로 실행 시켜서
사용자들이 동일한 환경에서 개발 및 배포를 하게해주는 것


이미지?
1. 이미지의 특징
	1. 하나의 이미지로 여러개의 똑같은 컨테이너 생성
	2. 여러개의 계층으로 이루어짐(Layer)
	3. 레이어는 캐싱이 된다.
		1. (이전에 만들었던 레이어를 불러와서 사용할 수 있다/재사용 = 캐싱)
2. 이미지의 생성 방법
	1. 도커허브에서 다운받는다? / 도커파일이라는 도구를 사용
3. 하나의 이미지는 무엇으로 이루어져있는가?
	1. 개발프로그램, OS, 코드

Spring Boot의 배포 과정
	gradle로 빌드하고  jar 또는 war로 만들어서 배포
	./gradlew build
	gradlew : gradle을 실행하는 명령어 모음 파일

	jar 파일은 무엇인가?
		포로젝트를 압축한 압축 파일
	
React의 배포 과정
	vite로 빌드하고 nginx를 이용하여 배포
	용량이 큰 경우 gzip으로 압축을 해서 배포

	번들링 도구(vite) 활용 -> 정적 파일(js, css, 이미지, 영상) 생성

	Nginx(웹 서버) : 클라이언트의 요청에 정적 파일을 응답하는 서버

Dockerfile?
	이미지의 빌드를 도와주는 것
	멀티 스테이지 빌드를 통해 최적화된(가벼운) 이미지를 빌드한다.
	이미지의 설계도
	개발자가 직접 했어야할 작업, 명령어를 정의하는 파일
	작업, 명령어 예시
		패키지 설치(apt install ...)
		파일 / 폴더 복사(copy)
		프로젝트 빌드(./gradlew build)
		프로그램 실행(java -jar ~.jar)
이런 작업들을 이미지를 빌드할 때 도커가 대신 하게 맡기는 것
	멀티 스테이지 빌드 : 여러 환경을 활용해서 이미지를 빌드하는 개념
		장점 : 필요한 이미지, 파일만 활용해서 이미지를 빌드하기 때문에
			이미지의 용량이 줄어든다.


Docker Compose ?
여러개의 컨테이너를 실행하기 위한 것
docker-compose.yml 파일에서 컨테이너를 관리한다
1개 이상의 컨테이너를 관리하는 도구
관리 -> 생성 / 삭제 / 실행 / 종료 / 생성 옵션(포트,네트워크,환경변수,...)


SSH란?
	물리적으로 접근할 수 없는 서버 PC에 원격으로 접속하여 해당 PC에 명령어를 입력하여 제어
	22번 포트를 사용한다
	원격으로 서버를 제어하기 위한 통신 방법 SSH
	
공개 키와 개인 키?
사용자는 공개 키와 개인 키를 생성하여 SSH에 연결하는데, 
공개 키는 서버에 저장된 키(자물쇠)
개인 키는 개인이 소유한 키(열쇠)
ssh -i 개인키경로 username@ip
또는 클라이언트 프로그램(terminus)

리눅스 OS?
서버로 많이 활용되는 오픈 소스 무료 OS.
윈도우, 맥에 비해 상대적으로 적은 양의 리소스를 필요로하는  OS
경량화 OS

EC2 보안그룹?
EC2 인스턴스 네트워크 보안을 담당하는 가상 방화벽
인스턴스로 들어가거나 인스턴스에서 나오는 트래픽 제어
EC2 보안그룹 : AWS가 제공하는 방화벽

UFW?
pc에서 프로그램을 설치 및 실행하는 형태의 방화벽

AWS IAM
 사용자 계정을 관리하는 서비스
 사용자 계정을 만드는 이유
	 권한을 분리하기 위해서

틀을 깨야한다??
로컬(내 PC)에서 개발만 하던 틀을 깨고,
원격(EC2 인스턴스, Github Actions Workspace)까지 생각해야한다.

CI/CD ? 
CI : 코드의 변경 사항을 공유 저장소(Github)에 정기적으로 자주 병합하는 방식
병합과 함께 자동으로 애플리케이션 빌드와 테스트까지 이루어지는 것을 CI라고 함

CD : 지속적 제공과 지속적 배포. 
지속적 제공
자동화 배포 파이프라인을 통해 테스트를 통과한 코드를 언제든 배포할 준비를 하는 프로세스
지속적 배포
자동화 배포 파이프라인을 통해 테스트를 통과한 코드를 자동으로 배포하는 프로세스

자주 병합하고, 자주 배포하자

왜 쓰는지?
개발자간 개발 진척도를 공유하고,
원할한 소통을 위해
개발팀과 운영팀의 소통을 위해

CI/CD를 구축  전과 구축 후의 차이
구축 전 배포를 어떻게?
도커 이미지 빌드 & 도커허브 push - 로컬
docker-compose, env 복사 -> 원격 서버(EC2) - 로컬
이미지 PULL & 컨테이너 UP - 원격 서버
구축 후
PUSH


Github Actions ?
깃허브에서 제공하는 CI/CD 도구
깃허브 원격 저장소의 특정 이벤트가 발생했을 때 워크플로우(파이프라인)를 실행시킨다.
secrets 기능을 활용해서 환경 변수를 관리할 수 있다.
다른 개발자가 만든 action을 활용할 수 있다.
	ssh-actions
	scp-actions
	checkout actions



프로젝트를 할 때 CI/CD 환경을 언제 구축해야 될까요?
- 수업에서 배운 방식을 그대로 사용안해도 됩니다.
- 배포 자동화 환경을 구축한다면 최대한 빠르게 구축하는것을 권장
	- 70% 개발이 된 상태에서 배포 / 10% 개발이 된 상태에서 배포
	- 10% 개발 상태에서 배포 오류 원인을 찾는 것이 쉽다
- 백엔드 <-> 프론트엔드 통신 코드를 작성하고, 배포하는 것을 권장



웹 서비스는 어떻게 작동하는가?
클라이언트가 요청을 하면 웹서버와 WAS가 요청을 받는다.
웹서버는 그 요청을 NGINX로 받아서 요청을 처리 한 뒤 응답을 한다.
WAS는 받은 요청을 데이터베이스로 보내고 데이터베이스는 

어떤 흐름으로 흘러가는가?


요청과 응답은 어떤식으로 이루어지는가?


WAS / Web Server / Proxy Server 각 서버의 역할
WAS
동적인 컨텐츠를 제공하는 서버(백엔드)
Web Server 
정척 컨텐츠를 클라이언트에게 제공하는 서버
Proxy Server



클라이언트가 우리 웹 서비스에 요청을 보냈을 때
정적인 콘텐츠는 웹서버에 요청하고 응답을 받고,

 동적인 데이터는 WAS에 전달되어, WAS가 데이터베이스와 연결되어 데이터를 받아와서 다시 클라이언트한테 제공
